import{s as we,f as w,a as L,e as x,K as ye,g as y,d as p,c as N,h as D,j as b,k as j,W as T,z as g,i as I,r as J,A as he,V as B,C as Ee,u as ee,l as S,m as G,U as ze,n as Q,P as X,ae as me,y as F,a3 as te}from"../chunks/scheduler.rZW7Z6w_.js";import{S as Ie,i as Te,a as U,t as q,c as le,b as pe,d as be,m as ve,e as ge,g as se}from"../chunks/index.WQ7nL_NI.js";import{g as De}from"../chunks/globals.0cDDIVm6.js";import{e as O}from"../chunks/each.o0bxhoLd.js";import{m as Me}from"../chunks/index.v_3u7Lux.js";import{e as Ve}from"../chunks/forms.amIU0NZs.js";import{r as Ce}from"../chunks/index.qOeORYfI.js";import{I as Le}from"../chunks/IconReload.o534m3fV.js";import{a as Ne}from"../chunks/stores.GqnCJTk4.js";import{P as Ae}from"../chunks/PageHeader.Q43NApRS.js";const ke="(prefers-reduced-motion: reduce)",Pe=()=>window.matchMedia(ke).matches,Se=Ce(Pe(),s=>{{const e=t=>{s(t.matches)},l=window.matchMedia(ke);return l.addEventListener("change",e),()=>{l.removeEventListener("change",e)}}}),Ge=""+new URL("../assets/dancing.CouW0fz2.gif",import.meta.url).href,{document:Y,window:He}=De;function ne(s,e,l){const t=s.slice();return t[11]=e[l],t}function ae(s,e,l){const t=s.slice();return t[14]=e[l],t}function re(s,e,l){const t=s.slice();t[17]=e[l],t[11]=l;const r=t[11]===t[5];return t[18]=r,t}function oe(s,e,l){const t=s.slice();t[17]=e[l],t[28]=l;const r=t[0].answers[t[11]]?.[t[28]];t[20]=r;const a=t[0].guesses[t[11]]?.[t[28]]??"";t[21]=a;const f=t[18]&&t[28]===t[0].guesses[t[11]].length;t[22]=f;const u=t[20]==="x";t[23]=u;const n=t[20]==="c";t[24]=n;const i=t[20]==="_";t[25]=i;const v=!t[21]&&t[18]&&!!t[0].correctLetters[t[28]];return t[26]=v,t}function ie(s){let e,l;return e=new Ae({props:{title:"Mathémo"}}),{c(){pe(e.$$.fragment)},l(t){be(e.$$.fragment,t)},m(t,r){ve(e,t,r),l=!0},i(t){l||(U(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){ge(e,t)}}}function Oe(s){let e;return{c(){e=S("empty")},l(l){e=G(l,"empty")},m(l,t){I(l,e,t)},d(l){l&&p(e)}}}function Ue(s){let e;return{c(){e=S("(absent)")},l(l){e=G(l,"(absent)")},m(l,t){I(l,e,t)},d(l){l&&p(e)}}}function We(s){let e;return{c(){e=S("(present)")},l(l){e=G(l,"(present)")},m(l,t){I(l,e,t)},d(l){l&&p(e)}}}function qe(s){let e;return{c(){e=S("(correct)")},l(l){e=G(l,"(correct)")},m(l,t){I(l,e,t)},d(l){l&&p(e)}}}function ce(s){let e,l=(s[21]||(s[18]?s[0].correctLetters[s[28]]:""))+"",t,r,a,f,u,n,i;function v(c,o){return c[23]?qe:c[24]?We:c[25]?Ue:Oe}let _=v(s),d=_(s);return{c(){e=w("div"),t=S(l),r=L(),a=w("span"),d.c(),f=L(),u=w("input"),this.h()},l(c){e=y(c,"DIV",{class:!0});var o=D(e);t=G(o,l),r=N(o),a=y(o,"SPAN",{class:!0});var h=D(a);d.l(h),h.forEach(p),f=N(o),u=y(o,"INPUT",{name:!0,type:!0}),o.forEach(p),this.h()},h(){b(a,"class","visually-hidden svelte-wr2cpa"),b(u,"name","guess"),u.disabled=n=!s[18],b(u,"type","hidden"),u.value=i=s[21],b(e,"class","letter svelte-wr2cpa"),T(e,"exact",s[23]),T(e,"close",s[24]),T(e,"missing",s[25]),T(e,"selected",s[22]),T(e,"clue",s[26])},m(c,o){I(c,e,o),g(e,t),g(e,r),g(e,a),d.m(a,null),g(e,f),g(e,u)},p(c,o){o&33&&l!==(l=(c[21]||(c[18]?c[0].correctLetters[c[28]]:""))+"")&&Q(t,l),_!==(_=v(c))&&(d.d(1),d=_(c),d&&(d.c(),d.m(a,null))),o&32&&n!==(n=!c[18])&&(u.disabled=n),o&1&&i!==(i=c[21])&&(u.value=i),o&1&&T(e,"exact",c[23]),o&1&&T(e,"close",c[24]),o&1&&T(e,"missing",c[25]),o&33&&T(e,"selected",c[22]),o&33&&T(e,"clue",c[26])},d(c){c&&p(e),d.d()}}}function ue(s){let e,l,t=s[11]+1+"",r,a,f,u=O(Array(s[0].size)),n=[];for(let i=0;i<u.length;i+=1)n[i]=ce(oe(s,u,i));return{c(){e=w("h2"),l=S("Row "),r=S(t),a=L(),f=w("div");for(let i=0;i<n.length;i+=1)n[i].c();this.h()},l(i){e=y(i,"H2",{class:!0});var v=D(e);l=G(v,"Row "),r=G(v,t),v.forEach(p),a=N(i),f=y(i,"DIV",{class:!0});var _=D(f);for(let d=0;d<n.length;d+=1)n[d].l(_);_.forEach(p),this.h()},h(){b(e,"class","visually-hidden svelte-wr2cpa"),b(f,"class","row svelte-wr2cpa"),T(f,"current",s[18])},m(i,v){I(i,e,v),g(e,l),g(e,r),I(i,a,v),I(i,f,v);for(let _=0;_<n.length;_+=1)n[_]&&n[_].m(f,null)},p(i,v){if(v&33){u=O(Array(i[0].size));let _;for(_=0;_<u.length;_+=1){const d=oe(i,u,_);n[_]?n[_].p(d,v):(n[_]=ce(d),n[_].c(),n[_].m(f,null))}for(;_<n.length;_+=1)n[_].d(1);n.length=u.length}v&32&&T(f,"current",i[18])},d(i){i&&(p(e),p(a),p(f)),B(n,i)}}}function je(s){let e,l,t,r,a,f,u="back",n,i,v,_=O(["qwertyuiop","asdfghjkl","zxcvbnm"]),d=[];for(let c=0;c<3;c+=1)d[c]=de(ne(s,_,c));return{c(){e=w("div"),l=w("button"),t=S("enter"),a=L(),f=w("button"),f.textContent=u,n=L();for(let c=0;c<3;c+=1)d[c].c();this.h()},l(c){e=y(c,"DIV",{class:!0});var o=D(e);l=y(o,"BUTTON",{"data-key":!0,class:!0});var h=D(l);t=G(h,"enter"),h.forEach(p),a=N(o),f=y(o,"BUTTON",{"data-key":!0,formaction:!0,name:!0,class:!0,"data-svelte-h":!0}),X(f)!=="svelte-1ptb1bp"&&(f.textContent=u),n=N(o);for(let z=0;z<3;z+=1)d[z].l(o);o.forEach(p),this.h()},h(){b(l,"data-key","enter"),l.disabled=r=!s[6],b(l,"class","svelte-wr2cpa"),T(l,"selected",s[6]),b(f,"data-key","backspace"),b(f,"formaction","?/update"),b(f,"name","key"),f.value="backspace",b(f,"class","svelte-wr2cpa"),b(e,"class","keyboard svelte-wr2cpa")},m(c,o){I(c,e,o),g(e,l),g(l,t),g(e,a),g(e,f),g(e,n);for(let h=0;h<3;h+=1)d[h]&&d[h].m(e,null);i||(v=J(f,"click",me(s[10])),i=!0)},p(c,o){if(o&64&&r!==(r=!c[6])&&(l.disabled=r),o&64&&T(l,"selected",c[6]),o&1077){_=O(["qwertyuiop","asdfghjkl","zxcvbnm"]);let h;for(h=0;h<3;h+=1){const z=ne(c,_,h);d[h]?d[h].p(z,o):(d[h]=de(z),d[h].c(),d[h].m(e,null))}for(;h<3;h+=1)d[h].d(1)}},i:F,o:F,d(c){c&&p(e),B(d,c),i=!1,v()}}}function Re(s){let e,l,t,r,a=(s[3]?s[9][Math.floor(Math.random()*s[9].length)]:"Game Over !")+"",f,u,n,i,v;function _(o,h){if(!o[3]&&o[0].answer)return Ke;if(o[3])return Be}let d=_(s),c=d&&d(s);return i=new Le({}),{c(){e=w("div"),c&&c.c(),l=L(),t=w("div"),r=w("div"),f=S(a),u=L(),n=w("button"),pe(i.$$.fragment),this.h()},l(o){e=y(o,"DIV",{class:!0});var h=D(e);c&&c.l(h),l=N(h),t=y(h,"DIV",{class:!0});var z=D(t);r=y(z,"DIV",{class:!0,style:!0});var P=D(r);f=G(P,a),P.forEach(p),u=N(z),n=y(z,"BUTTON",{"data-key":!0,class:!0,formaction:!0});var k=D(n);be(i.$$.fragment,k),k.forEach(p),z.forEach(p),h.forEach(p),this.h()},h(){b(r,"class","text-3xl"),j(r,"font-family","'pacifico'"),b(n,"data-key","enter"),b(n,"class","btn-icon variant-filled-primary my-2"),b(n,"formaction","?/restart"),b(t,"class","ml-6 flex flex-col items-center"),b(e,"class","flex items-center justify-center gap-8")},m(o,h){I(o,e,h),c&&c.m(e,null),g(e,l),g(e,t),g(t,r),g(r,f),g(t,u),g(t,n),ve(i,n,null),v=!0},p(o,h){d===(d=_(o))&&c?c.p(o,h):(c&&c.d(1),c=d&&d(o),c&&(c.c(),c.m(e,l))),(!v||h&8)&&a!==(a=(o[3]?o[9][Math.floor(Math.random()*o[9].length)]:"Game Over !")+"")&&Q(f,a)},i(o){v||(U(i.$$.fragment,o),v=!0)},o(o){q(i.$$.fragment,o),v=!1},d(o){o&&p(e),c&&c.d(),ge(i)}}}function fe(s){let e,l,t,r,a,f,u;return{c(){e=w("button"),l=S(s[14]),this.h()},l(n){e=y(n,"BUTTON",{"data-key":!0,class:!0,formaction:!0,name:!0,"aria-label":!0});var i=D(e);l=G(i,s[14]),i.forEach(p),this.h()},h(){b(e,"data-key",s[14]),b(e,"class",t=te(s[2][s[14]])+" svelte-wr2cpa"),e.disabled=r=s[0].guesses[s[5]].length===s[0].size,b(e,"formaction","?/update"),b(e,"name","key"),e.value=s[14],b(e,"aria-label",a=s[14]+" "+(s[4][s[14]]||""))},m(n,i){I(n,e,i),g(e,l),f||(u=J(e,"click",me(s[10])),f=!0)},p(n,i){i&4&&t!==(t=te(n[2][n[14]])+" svelte-wr2cpa")&&b(e,"class",t),i&33&&r!==(r=n[0].guesses[n[5]].length===n[0].size)&&(e.disabled=r),i&16&&a!==(a=n[14]+" "+(n[4][n[14]]||""))&&b(e,"aria-label",a)},d(n){n&&p(e),f=!1,u()}}}function de(s){let e,l,t=O(s[11]),r=[];for(let a=0;a<t.length;a+=1)r[a]=fe(ae(s,t,a));return{c(){e=w("div");for(let a=0;a<r.length;a+=1)r[a].c();l=L(),this.h()},l(a){e=y(a,"DIV",{class:!0});var f=D(e);for(let u=0;u<r.length;u+=1)r[u].l(f);l=N(f),f.forEach(p),this.h()},h(){b(e,"class","row svelte-wr2cpa")},m(a,f){I(a,e,f);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);g(e,l)},p(a,f){if(f&1077){t=O(a[11]);let u;for(u=0;u<t.length;u+=1){const n=ae(a,t,u);r[u]?r[u].p(n,f):(r[u]=fe(n),r[u].c(),r[u].m(e,l))}for(;u<r.length;u+=1)r[u].d(1);r.length=t.length}},d(a){a&&p(e),B(r,a)}}}function Be(s){let e,l=`<img src="${Ge}" alt="célébration"/>`;return{c(){e=w("div"),e.innerHTML=l,this.h()},l(t){e=y(t,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1d9gc7n"&&(e.innerHTML=l),this.h()},h(){b(e,"class","flex h-32 w-full justify-center")},m(t,r){I(t,e,r)},p:F,d(t){t&&p(e)}}}function Ke(s){let e,l,t="Le mot mathématique était :",r,a,f=s[0].answer+"",u;return{c(){e=w("div"),l=w("p"),l.textContent=t,r=L(),a=w("span"),u=S(f),this.h()},l(n){e=y(n,"DIV",{class:!0});var i=D(e);l=y(i,"P",{"data-svelte-h":!0}),X(l)!=="svelte-1n87bi7"&&(l.textContent=t),r=N(i),a=y(i,"SPAN",{class:!0});var v=D(a);u=G(v,f),v.forEach(p),i.forEach(p),this.h()},h(){b(a,"class","text-primary-500 text-3xl font-bold"),b(e,"class","flex flex-col")},m(n,i){I(n,e,i),g(e,l),g(e,r),g(e,a),g(a,u)},p(n,i){i&1&&f!==(f=n[0].answer+"")&&Q(u,f)},d(n){n&&p(e)}}}function _e(s){let e,l,t,r;return{c(){e=w("div"),this.h()},l(a){e=y(a,"DIV",{style:!0}),D(e).forEach(p),this.h()},h(){j(e,"position","absolute"),j(e,"left","50%"),j(e,"top","30%")},m(a,f){I(a,e,f),t||(r=he(l=Me.call(null,e,{particleCount:s[8]?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})),t=!0)},p(a,f){l&&ze(l.update)&&f&256&&l.update.call(null,{particleCount:a[8]?0:void 0,force:.7,stageWidth:window.innerWidth,stageHeight:window.innerHeight,colors:["#ff3e00","#40b3ff","#676778"]})},d(a){a&&p(e),t=!1,r()}}}function Ye(s){let e,l,t,r,a,f,u,n,i,v,_,d,c,o,h,z,P,k=!s[7]&&ie(),W=O(Array(6)),M=[];for(let m=0;m<W.length;m+=1)M[m]=ue(re(s,W,m));const Z=[Re,je],H=[];function $(m,E){return m[3]||m[0].answers.length>=6?0:1}_=$(s),d=H[_]=Z[_](s);let C=s[3]&&_e(s);return{c(){e=w("meta"),l=L(),k&&k.c(),t=L(),r=w("form"),a=w("div");for(let m=0;m<M.length;m+=1)M[m].c();f=L(),u=w("input"),i=L(),v=w("div"),d.c(),c=L(),C&&C.c(),o=x(),this.h()},l(m){const E=ye("svelte-ilf4mw",Y.head);e=y(E,"META",{name:!0,content:!0}),E.forEach(p),l=N(m),k&&k.l(m),t=N(m),r=y(m,"FORM",{method:!0,action:!0,class:!0});var A=D(r);a=y(A,"DIV",{class:!0,style:!0});var V=D(a);for(let K=0;K<M.length;K+=1)M[K].l(V);f=N(V),u=y(V,"INPUT",{name:!0,type:!0}),V.forEach(p),i=N(A),v=y(A,"DIV",{class:!0});var R=D(v);d.l(R),R.forEach(p),A.forEach(p),c=N(m),C&&C.l(m),o=x(),this.h()},h(){Y.title="Mathemo",b(e,"name","description"),b(e,"content","A Wordle clone written in SvelteKit"),b(u,"name","size"),b(u,"type","hidden"),u.value=n=s[0].size,b(a,"class","grid svelte-wr2cpa"),j(a,"--grid-size",s[0].size),T(a,"playing",!s[3]),T(a,"bad-guess",s[1]?.badGuess),b(v,"class","controls svelte-wr2cpa"),b(r,"method","POST"),b(r,"action","?/enter"),b(r,"class","svelte-wr2cpa")},m(m,E){g(Y.head,e),I(m,l,E),k&&k.m(m,E),I(m,t,E),I(m,r,E),g(r,a);for(let A=0;A<M.length;A+=1)M[A]&&M[A].m(a,null);g(a,f),g(a,u),g(r,i),g(r,v),H[_].m(v,null),I(m,c,E),C&&C.m(m,E),I(m,o,E),h=!0,z||(P=[J(He,"keydown",Fe),he(Ve.call(null,r,Je))],z=!0)},p(m,[E]){if(m[7]?k&&(se(),q(k,1,1,()=>{k=null}),le()):k?E&128&&U(k,1):(k=ie(),k.c(),U(k,1),k.m(t.parentNode,t)),E&33){W=O(Array(6));let V;for(V=0;V<W.length;V+=1){const R=re(m,W,V);M[V]?M[V].p(R,E):(M[V]=ue(R),M[V].c(),M[V].m(a,f))}for(;V<M.length;V+=1)M[V].d(1);M.length=W.length}(!h||E&1&&n!==(n=m[0].size))&&(u.value=n),(!h||E&1)&&j(a,"--grid-size",m[0].size),(!h||E&8)&&T(a,"playing",!m[3]),(!h||E&2)&&T(a,"bad-guess",m[1]?.badGuess);let A=_;_=$(m),_===A?H[_].p(m,E):(se(),q(H[A],1,1,()=>{H[A]=null}),le(),d=H[_],d?d.p(m,E):(d=H[_]=Z[_](m),d.c()),U(d,1),d.m(v,null)),m[3]?C?C.p(m,E):(C=_e(m),C.c(),C.m(o.parentNode,o)):C&&(C.d(1),C=null)},i(m){h||(U(k),U(d),h=!0)},o(m){q(k),q(d),h=!1},d(m){m&&(p(l),p(t),p(r),p(c),p(o)),p(e),k&&k.d(m),B(M,m),H[_].d(),C&&C.d(m),z=!1,Ee(P)}}}function Fe(s){s.metaKey||document.querySelector(`[data-key="${s.key}" i]`)?.dispatchEvent(new MouseEvent("click",{cancelable:!0}))}const Je=()=>({update:s})=>{s({reset:!1})};function Qe(s,e,l){let t,r,a,f,u;ee(s,Ne,o=>l(7,f=o)),ee(s,Se,o=>l(8,u=o));let{data:n}=e,{form:i}=e;const v=["Nice !","Good Job !","Well Done !","You nailed it !","You rock !","Great !"];let _,d;function c(o){const h=n.guesses[r],z=o.target.getAttribute("data-key");z==="backspace"?(l(0,n.guesses[r]=h.slice(0,-1),n),i?.badGuess&&l(1,i.badGuess=!1,i)):h.length<n.size&&l(0,n.guesses[r]+=z,n)}return s.$$set=o=>{"data"in o&&l(0,n=o.data),"form"in o&&l(1,i=o.form)},s.$$.update=()=>{s.$$.dirty&1&&console.log("correctLetters",n.correctLetters),s.$$.dirty&1&&console.log("size",n.size),s.$$.dirty&1&&l(3,t=n.answers.at(-1)==="xxxxxxxxxxxxxxxxx".substring(0,n.size)),s.$$.dirty&9&&l(5,r=t?-1:n.answers.length),s.$$.dirty&5&&(l(2,_={}),l(4,d={}),n.answers.forEach((o,h)=>{const z=n.guesses[h];for(let P=0;P<z.length;P+=1){const k=z[P];o[P]==="x"?(l(2,_[k]="exact",_),l(4,d[k]="correct",d)):_[k]||(l(2,_[k]=o[P]==="c"?"close":"missing",_),l(4,d[k]=o[P]==="c"?"present":"absent",d))}}))},l(6,a=!0),[n,i,_,t,d,r,a,f,u,v,c]}class rt extends Ie{constructor(e){super(),Te(this,e,Qe,Ye,we,{data:0,form:1})}}export{rt as component};
